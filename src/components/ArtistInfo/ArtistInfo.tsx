import { FC } from "react";
import css from "./ArtistInfo.module.css";
import { useDispatch, useSelector } from "react-redux";
import { AppDispatch, RootState } from "../../redux/store";
import {
  artistsApi,
  useGetArtistByIdQuery,
} from "../../redux/artists/artistsApi";
import closeIcon from "../../images/icons/x.svg";
import {
  selectArtistInfoId,
  toggleArtistInfo,
} from "../../redux/artists/artistInfoSlice";
import ArtistInfoSkeleton from "./ArtistInfoSkeleton/ArtistInfoSkeleton";

// interface ArtistInfoSchema {
//   [key: string]: string;
// }

export interface SongSchema {
  [key: string]: string | null;
}

const ArtistsInfo = () => {
  const dispatch = useDispatch<AppDispatch>();

  const currentArtistId = useSelector(selectArtistInfoId);
  const { data, isLoading, error } = useGetArtistByIdQuery(currentArtistId);
  console.log(isLoading);
  console.log(window.screen.width)
  if (isLoading)
    return (
      <>
        <ArtistInfoSkeleton />
      </>
    );
  if (error) {
    console.log(error);
    return <></>;
  }
  console.log(data);

  const handleCloseArtistInfo = () => {
    dispatch(toggleArtistInfo());
  };

  // console.log(window.screen.width)

  return (
    <div className={css.artistInfoBackdrop}>
      <div className={css.artistInfoModal}>
        <button
          type="button"
          className={css.closeArtistInfoBtn}
          onClick={handleCloseArtistInfo}
        >
          <img src={closeIcon} alt="iconForClose" />
        </button>
        <div className={css.test}>
          <img
            src={data.strArtistThumb}
            alt="artist_photo"
            className={css.artistInfoImg}
          />
          <div className={css.artistInfoBox}>
            <h2 className={css.artistInfoName}>{data.strArtist}</h2>
            <p className={css.artistInfoDescription}>{data.strBiographyEN}</p>
            {window.screen.width > 1200 || window.screen.width < 768 ? (
              <>
                <h2 className={css.artistInfoSongsTitle}>Songs</h2>
                <ul className={css.artistsInfoSongsList}>
                  {data.tracksList.map((song: SongSchema, idx: number) => {
                    return (
                      <li className={css.artistInfoSongItem}>
                        <p className={css.artistInfoSongNumber}>
                          {idx < 9 ? `0${idx + 1}` : idx + 1}
                        </p>
                        <div className={css.songNameAndAlbumBox}>
                          <h3 className={css.artistInfoSongName}>
                            {song.strTrack}
                          </h3>
                          <p className={css.artistInfoSongAlbum}>
                            {song.strAlbum}
                          </p>
                        </div>
                        <p className={css.artistInfoSongDuration}>
                          {song.intDuration}
                        </p>
                        <a
                          href={song.movie === null ? "https://www.youtube.com/watch?v=LIqeDVeWeHY" : song.movie}
                          className={css.artistInfoMovieLink}
                          target="_blank"
                        >
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            width="58"
                            height="12"
                            viewBox="0 0 58 12"
                            fill="none"
                          >
                            <g clip-path="url(#clip0_69_2783)">
                              <path
                                d="M18.1097 1.87418C17.8966 1.13618 17.2707 0.556217 16.4744 0.358663C15.0326 0.000244248 9.2482 0.000244141 9.2482 0.000244141C9.2482 0.000244141 3.4639 0.000244248 2.022 0.358663C1.22569 0.556217 0.599902 1.13618 0.386739 1.87418C1.15765e-07 3.21049 0 6.00023 0 6.00023C0 6.00023 1.15765e-07 8.78999 0.386739 10.1263C0.599902 10.8643 1.22569 11.4443 2.022 11.6418C3.4639 12.0002 9.2482 12.0002 9.2482 12.0002C9.2482 12.0002 15.0326 12.0002 16.4744 11.6418C17.2707 11.4443 17.8966 10.8643 18.1097 10.1263C18.4965 8.78999 18.4965 6.00023 18.4965 6.00023C18.4965 6.00023 18.4949 3.21049 18.1097 1.87418Z"
                                fill="#FF0000"
                              />
                              <path
                                d="M7.39746 8.57123L12.2028 6.00023L7.39746 3.4292V8.57123Z"
                                fill="#F7F7F7"
                              />
                              <path
                                d="M22.402 7.80214L20.3252 0.851074H22.1371L22.8649 4.00205C23.0506 4.77815 23.1862 5.43996 23.2745 5.98746H23.3277C23.3887 5.59518 23.5257 4.93761 23.7374 4.01334L24.491 0.851074H26.3029L24.2002 7.80214V11.1366H22.4005V7.80214H22.402Z"
                                fill="#F7F7F7"
                              />
                              <path
                                d="M26.8484 10.9163C26.483 10.6877 26.2226 10.3321 26.0673 9.8495C25.9136 9.36693 25.8359 8.72631 25.8359 7.92477V6.83397C25.8359 6.02541 25.9242 5.37492 26.1009 4.88527C26.2775 4.39562 26.5531 4.0372 26.9276 3.81284C27.3022 3.58848 27.794 3.47559 28.403 3.47559C29.0029 3.47559 29.4825 3.58989 29.8449 3.81849C30.2057 4.04708 30.4707 4.4055 30.6381 4.89092C30.8056 5.37774 30.8894 6.02541 30.8894 6.83397V7.92477C30.8894 8.72631 30.8072 9.36975 30.6443 9.85514C30.4813 10.342 30.2164 10.6976 29.851 10.9219C29.4856 11.1463 28.9892 11.2592 28.3634 11.2592C27.7178 11.2606 27.2139 11.1449 26.8484 10.9163ZM28.8978 9.73946C28.9983 9.49395 29.0501 9.09459 29.0501 8.53863V6.19761C29.0501 5.65856 28.9999 5.26344 28.8978 5.01509C28.7958 4.76533 28.6177 4.64116 28.3619 4.64116C28.1153 4.64116 27.9401 4.76533 27.8397 5.01509C27.7376 5.26486 27.6874 5.65856 27.6874 6.19761V8.53863C27.6874 9.09459 27.7361 9.49533 27.8336 9.73946C27.931 9.98498 28.1061 10.1077 28.3619 10.1077C28.6177 10.1077 28.7958 9.98498 28.8978 9.73946Z"
                                fill="#F7F7F7"
                              />
                              <path
                                d="M36.7828 11.138H35.3547L35.1963 10.218H35.1567C34.7684 10.9122 34.1868 11.2593 33.4103 11.2593C32.8728 11.2593 32.4754 11.0957 32.2197 10.7697C31.9639 10.4423 31.8359 9.93155 31.8359 9.23729V3.6225H33.6616V9.13847C33.6616 9.47435 33.7011 9.71279 33.7803 9.85535C33.8595 9.99785 33.9919 10.0698 34.1777 10.0698C34.336 10.0698 34.4883 10.0247 34.6345 9.93437C34.7807 9.84401 34.8872 9.72971 34.9588 9.59147V3.62109H36.7828V11.138Z"
                                fill="#F7F7F7"
                              />
                              <path
                                d="M41.7418 2.21259H39.9299V11.1378H38.1439V2.21259H36.332V0.852295H41.7418V2.21259Z"
                                fill="#F7F7F7"
                              />
                              <path
                                d="M46.1451 11.138H44.717L44.5586 10.218H44.519C44.1308 10.9122 43.5492 11.2593 42.7726 11.2593C42.2351 11.2593 41.8378 11.0957 41.582 10.7697C41.3262 10.4423 41.1982 9.93155 41.1982 9.23729V3.6225H43.0239V9.13847C43.0239 9.47435 43.0634 9.71279 43.1426 9.85535C43.2218 9.99785 43.3542 10.0698 43.54 10.0698C43.6983 10.0698 43.8506 10.0247 43.9968 9.93437C44.143 9.84401 44.2495 9.72971 44.3211 9.59147V3.62109H46.1451V11.138Z"
                                fill="#F7F7F7"
                              />
                              <path
                                d="M52.1869 4.82326C52.0757 4.34914 51.8976 4.00624 51.651 3.79316C51.4043 3.58009 51.0648 3.47425 50.6324 3.47425C50.2974 3.47425 49.9837 3.56174 49.6929 3.73813C49.4021 3.91451 49.1767 4.14452 49.0184 4.43098H49.0047V0.471436H47.2461V11.1365H48.7535L48.9392 10.4253H48.9788C49.1204 10.6793 49.332 10.8783 49.6137 11.0265C49.8954 11.1732 50.2091 11.2466 50.5532 11.2466C51.1698 11.2466 51.6251 10.9827 51.9159 10.4564C52.2067 9.92859 52.3528 9.10593 52.3528 7.98556V6.796C52.3528 5.95637 52.2965 5.29739 52.1869 4.82326ZM50.5136 7.88956C50.5136 8.43705 50.4892 8.86605 50.4405 9.17649C50.3918 9.48693 50.311 9.70851 50.1954 9.83829C50.0811 9.96951 49.9258 10.0344 49.7325 10.0344C49.5817 10.0344 49.4432 10.002 49.3153 9.93567C49.1874 9.87075 49.0839 9.77199 49.0047 9.64215V5.37641C49.0656 5.1718 49.1722 5.00529 49.3229 4.87406C49.4721 4.74283 49.6366 4.67792 49.8116 4.67792C49.9974 4.67792 50.1405 4.74565 50.2411 4.87971C50.343 5.01517 50.4131 5.24095 50.4527 5.55985C50.4923 5.87876 50.5121 6.33172 50.5121 6.92014V7.88956H50.5136Z"
                                fill="#F7F7F7"
                              />
                              <path
                                d="M54.9427 8.32281C54.9427 8.80539 54.9579 9.16665 54.9884 9.40797C55.0188 9.64923 55.0827 9.82425 55.1802 9.93573C55.2776 10.0458 55.4268 10.1008 55.6294 10.1008C55.9019 10.1008 56.0907 10.002 56.1912 9.80589C56.2932 9.60975 56.348 9.28239 56.3572 8.82519L57.9315 8.91123C57.9407 8.97615 57.9452 9.06645 57.9452 9.18075C57.9452 9.87501 57.7396 10.3943 57.3301 10.7372C56.9205 11.0801 56.3404 11.2522 55.5913 11.2522C54.6915 11.2522 54.0611 10.9912 53.7002 10.4677C53.3379 9.94418 53.1582 9.13563 53.1582 8.04057V6.72825C53.1582 5.60081 53.3455 4.77673 53.72 4.25745C54.0946 3.73816 54.7356 3.47852 55.6446 3.47852C56.2704 3.47852 56.7515 3.58435 57.0865 3.79743C57.4214 4.0105 57.6574 4.3407 57.7945 4.79084C57.9315 5.24098 58 5.86186 58 6.65487V7.94181H54.9427V8.32281ZM55.1741 4.78096C55.0812 4.88679 55.0203 5.06036 54.9884 5.30165C54.9579 5.54295 54.9427 5.90843 54.9427 6.39951V6.93855H56.278V6.39951C56.278 5.91689 56.2597 5.55142 56.2247 5.30165C56.1897 5.05189 56.1257 4.87691 56.0328 4.77391C55.94 4.67231 55.7968 4.6201 55.6035 4.6201C55.4086 4.62151 55.2654 4.67513 55.1741 4.78096Z"
                                fill="#F7F7F7"
                              />
                            </g>
                            <defs>
                              <clipPath id="clip0_69_2783">
                                <rect width="58" height="12" fill="white" />
                              </clipPath>
                            </defs>
                          </svg>
                        </a>
                      </li>
                    );
                  })}
                </ul>
              </>
            ) : (
              <></>
            )}
          </div>
        </div>
        {window.screen.width >= 768 && window.screen.width < 1200 && (
          <>
            <h2 className={css.artistInfoSongsTitle}>Songs</h2>
            <ul className={css.artistsInfoSongsList}>
              {data.tracksList.map((song: SongSchema, idx: number) => {
                return (
                  <li className={css.artistInfoSongItem}>
                    <p className={css.artistInfoSongNumber}>
                      {idx < 9 ? `0${idx + 1}` : idx + 1}
                    </p>
                    <div className={css.songNameAndAlbumBox}>
                      <h3 className={css.artistInfoSongName}>
                        {song.strTrack}
                      </h3>
                      <p className={css.artistInfoSongAlbum}>{song.strAlbum}</p>
                    </div>
                    <p className={css.artistInfoSongDuration}>
                      {song.intDuration}
                    </p>
                    <a
                      href={song.movie === null ? "https://www.youtube.com/watch?v=LIqeDVeWeHY" : song.movie}
                      className={css.artistInfoMovieLink}
                      target="_blank"
                    >
                      <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="58"
                        height="12"
                        viewBox="0 0 58 12"
                        fill="none"
                      >
                        <g clip-path="url(#clip0_69_2783)">
                          <path
                            d="M18.1097 1.87418C17.8966 1.13618 17.2707 0.556217 16.4744 0.358663C15.0326 0.000244248 9.2482 0.000244141 9.2482 0.000244141C9.2482 0.000244141 3.4639 0.000244248 2.022 0.358663C1.22569 0.556217 0.599902 1.13618 0.386739 1.87418C1.15765e-07 3.21049 0 6.00023 0 6.00023C0 6.00023 1.15765e-07 8.78999 0.386739 10.1263C0.599902 10.8643 1.22569 11.4443 2.022 11.6418C3.4639 12.0002 9.2482 12.0002 9.2482 12.0002C9.2482 12.0002 15.0326 12.0002 16.4744 11.6418C17.2707 11.4443 17.8966 10.8643 18.1097 10.1263C18.4965 8.78999 18.4965 6.00023 18.4965 6.00023C18.4965 6.00023 18.4949 3.21049 18.1097 1.87418Z"
                            fill="#FF0000"
                          />
                          <path
                            d="M7.39746 8.57123L12.2028 6.00023L7.39746 3.4292V8.57123Z"
                            fill="#F7F7F7"
                          />
                          <path
                            d="M22.402 7.80214L20.3252 0.851074H22.1371L22.8649 4.00205C23.0506 4.77815 23.1862 5.43996 23.2745 5.98746H23.3277C23.3887 5.59518 23.5257 4.93761 23.7374 4.01334L24.491 0.851074H26.3029L24.2002 7.80214V11.1366H22.4005V7.80214H22.402Z"
                            fill="#F7F7F7"
                          />
                          <path
                            d="M26.8484 10.9163C26.483 10.6877 26.2226 10.3321 26.0673 9.8495C25.9136 9.36693 25.8359 8.72631 25.8359 7.92477V6.83397C25.8359 6.02541 25.9242 5.37492 26.1009 4.88527C26.2775 4.39562 26.5531 4.0372 26.9276 3.81284C27.3022 3.58848 27.794 3.47559 28.403 3.47559C29.0029 3.47559 29.4825 3.58989 29.8449 3.81849C30.2057 4.04708 30.4707 4.4055 30.6381 4.89092C30.8056 5.37774 30.8894 6.02541 30.8894 6.83397V7.92477C30.8894 8.72631 30.8072 9.36975 30.6443 9.85514C30.4813 10.342 30.2164 10.6976 29.851 10.9219C29.4856 11.1463 28.9892 11.2592 28.3634 11.2592C27.7178 11.2606 27.2139 11.1449 26.8484 10.9163ZM28.8978 9.73946C28.9983 9.49395 29.0501 9.09459 29.0501 8.53863V6.19761C29.0501 5.65856 28.9999 5.26344 28.8978 5.01509C28.7958 4.76533 28.6177 4.64116 28.3619 4.64116C28.1153 4.64116 27.9401 4.76533 27.8397 5.01509C27.7376 5.26486 27.6874 5.65856 27.6874 6.19761V8.53863C27.6874 9.09459 27.7361 9.49533 27.8336 9.73946C27.931 9.98498 28.1061 10.1077 28.3619 10.1077C28.6177 10.1077 28.7958 9.98498 28.8978 9.73946Z"
                            fill="#F7F7F7"
                          />
                          <path
                            d="M36.7828 11.138H35.3547L35.1963 10.218H35.1567C34.7684 10.9122 34.1868 11.2593 33.4103 11.2593C32.8728 11.2593 32.4754 11.0957 32.2197 10.7697C31.9639 10.4423 31.8359 9.93155 31.8359 9.23729V3.6225H33.6616V9.13847C33.6616 9.47435 33.7011 9.71279 33.7803 9.85535C33.8595 9.99785 33.9919 10.0698 34.1777 10.0698C34.336 10.0698 34.4883 10.0247 34.6345 9.93437C34.7807 9.84401 34.8872 9.72971 34.9588 9.59147V3.62109H36.7828V11.138Z"
                            fill="#F7F7F7"
                          />
                          <path
                            d="M41.7418 2.21259H39.9299V11.1378H38.1439V2.21259H36.332V0.852295H41.7418V2.21259Z"
                            fill="#F7F7F7"
                          />
                          <path
                            d="M46.1451 11.138H44.717L44.5586 10.218H44.519C44.1308 10.9122 43.5492 11.2593 42.7726 11.2593C42.2351 11.2593 41.8378 11.0957 41.582 10.7697C41.3262 10.4423 41.1982 9.93155 41.1982 9.23729V3.6225H43.0239V9.13847C43.0239 9.47435 43.0634 9.71279 43.1426 9.85535C43.2218 9.99785 43.3542 10.0698 43.54 10.0698C43.6983 10.0698 43.8506 10.0247 43.9968 9.93437C44.143 9.84401 44.2495 9.72971 44.3211 9.59147V3.62109H46.1451V11.138Z"
                            fill="#F7F7F7"
                          />
                          <path
                            d="M52.1869 4.82326C52.0757 4.34914 51.8976 4.00624 51.651 3.79316C51.4043 3.58009 51.0648 3.47425 50.6324 3.47425C50.2974 3.47425 49.9837 3.56174 49.6929 3.73813C49.4021 3.91451 49.1767 4.14452 49.0184 4.43098H49.0047V0.471436H47.2461V11.1365H48.7535L48.9392 10.4253H48.9788C49.1204 10.6793 49.332 10.8783 49.6137 11.0265C49.8954 11.1732 50.2091 11.2466 50.5532 11.2466C51.1698 11.2466 51.6251 10.9827 51.9159 10.4564C52.2067 9.92859 52.3528 9.10593 52.3528 7.98556V6.796C52.3528 5.95637 52.2965 5.29739 52.1869 4.82326ZM50.5136 7.88956C50.5136 8.43705 50.4892 8.86605 50.4405 9.17649C50.3918 9.48693 50.311 9.70851 50.1954 9.83829C50.0811 9.96951 49.9258 10.0344 49.7325 10.0344C49.5817 10.0344 49.4432 10.002 49.3153 9.93567C49.1874 9.87075 49.0839 9.77199 49.0047 9.64215V5.37641C49.0656 5.1718 49.1722 5.00529 49.3229 4.87406C49.4721 4.74283 49.6366 4.67792 49.8116 4.67792C49.9974 4.67792 50.1405 4.74565 50.2411 4.87971C50.343 5.01517 50.4131 5.24095 50.4527 5.55985C50.4923 5.87876 50.5121 6.33172 50.5121 6.92014V7.88956H50.5136Z"
                            fill="#F7F7F7"
                          />
                          <path
                            d="M54.9427 8.32281C54.9427 8.80539 54.9579 9.16665 54.9884 9.40797C55.0188 9.64923 55.0827 9.82425 55.1802 9.93573C55.2776 10.0458 55.4268 10.1008 55.6294 10.1008C55.9019 10.1008 56.0907 10.002 56.1912 9.80589C56.2932 9.60975 56.348 9.28239 56.3572 8.82519L57.9315 8.91123C57.9407 8.97615 57.9452 9.06645 57.9452 9.18075C57.9452 9.87501 57.7396 10.3943 57.3301 10.7372C56.9205 11.0801 56.3404 11.2522 55.5913 11.2522C54.6915 11.2522 54.0611 10.9912 53.7002 10.4677C53.3379 9.94418 53.1582 9.13563 53.1582 8.04057V6.72825C53.1582 5.60081 53.3455 4.77673 53.72 4.25745C54.0946 3.73816 54.7356 3.47852 55.6446 3.47852C56.2704 3.47852 56.7515 3.58435 57.0865 3.79743C57.4214 4.0105 57.6574 4.3407 57.7945 4.79084C57.9315 5.24098 58 5.86186 58 6.65487V7.94181H54.9427V8.32281ZM55.1741 4.78096C55.0812 4.88679 55.0203 5.06036 54.9884 5.30165C54.9579 5.54295 54.9427 5.90843 54.9427 6.39951V6.93855H56.278V6.39951C56.278 5.91689 56.2597 5.55142 56.2247 5.30165C56.1897 5.05189 56.1257 4.87691 56.0328 4.77391C55.94 4.67231 55.7968 4.6201 55.6035 4.6201C55.4086 4.62151 55.2654 4.67513 55.1741 4.78096Z"
                            fill="#F7F7F7"
                          />
                        </g>
                        <defs>
                          <clipPath id="clip0_69_2783">
                            <rect width="58" height="12" fill="white" />
                          </clipPath>
                        </defs>
                      </svg>
                    </a>
                  </li>
                );
              })}
            </ul>
          </>
        )}
      </div>
    </div>
  );
};

export default ArtistsInfo;
